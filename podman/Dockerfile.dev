# -------------------------------
# Base .NET SDK image (dynamic version)
# -------------------------------
ARG DOTNET_VERSION=9.0
FROM mcr.microsoft.com/dotnet/sdk:${DOTNET_VERSION}

# Create vscode user safely (avoid duplicate UID errors in rootless Podman)
RUN id -u vscode &>/dev/null || useradd -u 1000 -m vscode

# Switch to non-root user for development
USER 1000:1000

# Set working directory (used by VS Code / Rider)
WORKDIR /workspaces/app

# Keep container running for remote attach
CMD ["sleep", "infinity"]
