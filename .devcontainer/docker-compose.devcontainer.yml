version: "3.9"

services:
  api:
    image: ghcr.io/hallboard-team/dotnet-v9.0:latest

    # IMPORTANT: run as root inside container (maps to your host user in rootless Podman)
    user: "0:0"

    working_dir: /workspaces/app

    volumes:
      - ..:/workspaces/app:Z
      - vscode:/vscode   # VS Code server lives in this volume

    environment:
      VSCODE_SERVER_DIR: /vscode/vscode-server

volumes:
  vscode:
    external: true
